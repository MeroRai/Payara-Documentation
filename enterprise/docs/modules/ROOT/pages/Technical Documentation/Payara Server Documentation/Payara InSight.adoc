[[payara-insight]]
= Payara InSight
:ordinal: 11

Payara InSight allows real-time visualization and alerting for server and web application metrics.

It consists of a server module responsible for collecting a multitude of metrics from all nodes which are accumulated on the DAS to feed data to its frontend which visualizes the data as a web-application deployed on the DAS.

The metrics include server metrics from different sources within the server as well as metrics defined in user applications using _MicroProfile Metrics_ and metrics derived from _MicroProfile Health_ checks.

[[enabling-the-gui]]
== Enabling the GUI

By default, the Payara Insight GUI is automatically enabled for the `production` domain. Links can be found on the _Common Tasks_ home page of the Admin GUI in section _Monitoring_ or on the _Monitoring Data_ page.

For `domain1` the GUI is not enabled by default and the `set-monitoring-console-configuration` is used to enable it on demand.

To enable the GUI manually run the following asadmin command:

[source, shell]
----
asadmin> set-monitoring-console-configuration --enabled=true
----

Payara InSight is available at `http://localhost:8080/monitoring-console/` .
Like the Admin console's user interface, it only runs on the DAS.

To stop Payara Insight run this command:

[source, shell]
----
asadmin> set-monitoring-console-configuration --enabled=false
----

TIP: Stopping the application does not disable the data collection. +
This is a background process that is controlled separately as described in the next section.

[[enabling-data-collection]]
== Enabling Data Collection

The collection of monitoring data gets enabled and disabled in connection with the general configuration: _Monitoring_ => _Monitoring Service_ => _Enabled_.
By default, this setting is enabled.

NOTE: If you want to remove the monitoring data collection from the server's runtime without disabling the monitoring service itself you must delete the `monitoring-console-core.jar` from the `as-install/modules` folder of your server installation and restart the server.

[[enabling-data-aggregation]]
== Enabling Data Aggregation (History)

By default, InSight has a sliding window of data per metric of usually one minute length which contains 1 point per second. This allows typical "real-time" monitoring. These points represent the raw data as it is probed/collected.

Without a history points that get "pushed" out of the sliding window are "forgotten".

A history can be enabled which aggregates the points per seconds to 1 aggregated point per minute, the minutes to 1 point per hour, the hours to 1 point per day. These aggregations equally have sliding windows, so they hold the recent hour, day or month worth of data.

The longer points are in the past the fewer points per fixed time-frame there are:

* In the most recent minute there are the raw (not aggregated) points per second.
* In the most recent hour there is 1 point per minute from aggregating the seconds within the last minute.
* In the most recent day there is 1 point per hour from aggregating the minutes within the last hour.
* In the most recent month there is 1 point per day from aggregating the hours within the last day.

The aggregation of points must be enabled using the following Asadmin command:

[source, shell]
----
asadmin> set-monitoring-console-configuration --history-enabled=true
----

This command starts the aggregation which increases over time. The aggregated data is only stored in memory. Widgets can choose to show this data using the _Extras_ - _History_ setting.

The aggregation of points can be disabled again using the following asadmin command:

[source, shell]
----
asadmin> set-monitoring-console-configuration --history-enabled=false
----

NOTE: All aggregated data is discarded and cannot be restored. Equally, history is lost when the server is restarted.

The aggregated history feature is designed to keep memory usage fairly low. 1000 metrics require in the range of single digit MBs of memory.

In typical environments the extra memory and CPU effort for the history should not be an issue.

[[graphical-user-interface]]
== Graphical User Interface

After enabling Payara InSight open the home page at `/monitoring-console/` (usually on port `8080`).

The GUI ships with a set of xref:#presets-pages[preconfigured pages] each focussing on a different aspect of the server.

NOTE: Some metrics are only available when the monitoring configuration of certain server parts is set to `HIGH`. Widgets that do depend on such a configuration changes let you know how to enable the metrics.

[[pages]]
=== Pages

Payara InSight is organized in fully customizable pages. A page is a collection of xref:#widgets[widgets] arranged in columns. Usually, pages are focused on visualizing metrics of a specific area of the server, like HTTP or request tracing.

The pre-configured pages are a starting point that can be changed and extended by the user. New custom pages can be created and populated with arbitrary metrics.

[[switching-pages]]
==== Switching Pages

To switch page use the left menu.

image::monitoring-console/mc_menu_left.png[Page Navigation]

image::monitoring-console/mc_menu_left-min.png[Page Navigation (minimised)]

TIP: Each page switch also updates the URL making them "bookmarkeable". URLs can be copied and shared with others to share particular pages with them.

Updating URLs after switching pages also means that once the page is changed using the dropdown navigation, the browser's page history based navigation can be used to go back to already visited pages.

[[changing-page-layout]]
==== Changing Page Layout

Each page uses a column layout of one or more columns. The number of columns for a page can be changed using one of the _Layout Columns_ quick access buttons.

Changing the column layout of a page does not change the preferred position of the widgets. If a widget is set to column 3 but a 2-column layout is used all widgets of the 3rd or 4th column get pushed to the 2nd column instead. This allows switching layouts based on the viewing device without redoing the configuration entirely.

[[changing-page-interval]]
==== Changing Page Update Interval

By default, the graphs on a page update every 2 seconds. To control the interval use quick access on the left side menu or _General_ application settings.

image::monitoring-console/mc_settings_app_general-h.png[General Application Settings]

The interval can be paused and continued without changing the interval duration by using the _play/pause_ toggle next to the interval setting.

[[adding-pages]]
==== Adding Pages

To add a new page expand the left menu, click the _Add New Page_ button below the list of pages and enter a name for the new page in the dialogue.

image::monitoring-console/mc_dialog_add-new-page.png[Add Page Dialog]

Usually pages are populated manually.
Use the _Add New Widgets_ button in the right sidebar (_+_ when minimized) to populate the page and configure the added widgets.

Alternatively pages can use a query to automatically populate the page with widgets for those metrics that match the query. To use a query page open the page settings and switch the _Type_ to _Query_:

image::monitoring-console/mc_settings_page_general-query-h.png[Query Page Settings]

Fill in _Query Series_ and _Query Interval_ and click the _Update Now_ button.

NOTE: Query pages are repopulated in intervals. Any changes to individual widget settings will be overridden with the next population. However, queries can be used to initially populate a page and then switch the page back to _Type: Manual_ so that changes to the widgets are kept. +
Naturally this comes at the downside that metrics no longer are added to the page automatically.

Learn more about xref:#pattern-data-series[series patterns] as used by query pages.

[[deleting-pages]]
==== Deleting a Page

To delete a page open the left sidebar and click the on the trash icon next to the page name in the list of pages you want to delete.

image::monitoring-console/mc_menu_delete.png[Delete a Page]

Confirm the deletion.

image::monitoring-console/mc_dialog_delete-page.png[Delete a Page Confirmation Dialogue]

NOTE: Pages that are based on a preset cannot be deleted. They can only be reset to their preset configuration.

[[reset-pages]]
==== Reset a Page

When the configuration of a preconfigured page or any of the widgets on it was changed by the user the page can be reset by clicking the _Reset_ icon next to the page name in the expanded left side menu.

image::monitoring-console/mc_menu_reset.png[Reset a Page]

Confirm the reset.

image::monitoring-console/mc_dialog_reset-page.png[Reset a Page]

WARNING: The reset will affect all widgets and the general page settings of the currently shown page. All changes made previously by a user will be overridden.

NOTE: To reset all pages and remove all user-created pages, clear the browser's local storage of Payara InSight.

image::monitoring-console/mc_sample_local-storage-chrome.png[Clear Local Storage in Chrome Browser]

[[page-rotation]]
==== Page Rotation

Payara InSight is meant to be used to display metrics on status monitors.
To allow viewing a variety of pages and their metrics on a single screen the pages can be automatically rotated showing each page for a configured interval duration.

To start or stop page rotation either use the quick access button at the button of the left side menu or use the toggle switch in the _General_ application settings. This starts or stops the rotation immediately and each page is shown for the configured duration starting with the currently shown page.

The duration can be adjusted by changing the text field of the _Page Rotation_ to another time value. Use units to express the duration, as for example: `1min`, `30sec`. Changes take effect immediately.

Individual pages can be excluded from rotation by toggling the _Include In Rotation_ toggle to _No_ in the page settings.

image::monitoring-console/mc_settings_page_general-h.png[Page Settings]

[[page-management]]
==== Page Management

Payara InSight uses the browser's local storage to store the page configuration (which includes the widgets placed on a page). This means by default changes to page configurations do not affect other users.

To make pages available to others and to start from a common base configuration pages are explicitly synchronised with a persistent server page configuration.

The monitoring console can be used in one of three roles:

* _Guest_: A user that uses Payara Insight only on occasion to check existing metrics on existing pages ("read-only" user).
* _User_: A user that uses the console to experiment with its features without affecting others.
* _Administrator_:  A user that uses the console to configure the configuration that is the basis for other users.

The chosen role controls the behaviour and available options for the page synchronisation:

__Administrator__:: This role that is meant to manage the persistent server page configuration. The _Administrator_ pushes local changes to the server to update the base configuration.
__User__::
__Guest__::
They pull the server configuration to update their local configuration with the base.

The control remains with each user.

The _Page Synchronisation_ dialogue shown when entering the GUI allows the user to pick the pages that should be updated (pulled).

image::monitoring-console/mc_dialog_sync-pages.png[Page Synchronisation]

By default, all pages available remotely that have not been changed locally are preselected.

NOTE: _Guests_ automatically pull the servers base configuration, no dialogue is used

The newest version is marked with an asterisk for easier orientation.

This dialogue can also be opened from the _Pages_ application settings by clicking the _Update Local..._ button for the _Page Sync_ property.

image::monitoring-console/mc_settings_app_pages-h.png[Page Synchronisation Application Settings]

__Administrators__ also find a button to _Update Server..._ pages with any changes applied to local changes. This is only needed for pages that are not using automatic updates in their page settings.

This simply should give administrators different approaches to managing the configuration of shared pages. To bulk update all server pages click the _Update Server..._ button and confirm the update:

image::monitoring-console/mc_dialog_push-pages.png[Push All Pages Confirmation Dialogue]

To share a page that so far is not part of the persistent server configuration open the _Page_ settings and look for the _Server Sync_ property.

image::monitoring-console/mc_settings_page_general-h.png[General Page Settings]

__Users__ and __Administrators__ can both _Push_ a page to share or update the persistent server configuration or _Pull_ the server configuration to update the local page.
__Administrators__ can also enable or disable the __automatic__ page synchronisation. When enabled any local change done by an _Administrator_ is automatically pushed to the remote configuration.

Both _Push_ and _Pull_ need to be confirmed.

image::monitoring-console/mc_dialog_pull-page.png[Confirm Page Pull]
image::monitoring-console/mc_dialog_push-page.png[Confirm Page Push]

[[page-export]]
==== Page Export

Besides the managed page synchronisation which is using the persistent server configuration the local configuration can also be managed manually. To manually export pages click the _Export..._ button and select the set of pages to export in the dialogue and confirm your selection by pressing _Export_

image::monitoring-console/mc_dialog_export-pages.png[Page Export Dialogue]

[[page-import]]
==== Page Import

To manually import pages click the _Import..._ button and select a file. The dialogue will show the list of pages contained in the file.

Select the pages that should be imported:

image::monitoring-console/mc_dialog_import-pages.png[Page Import Dialogue]

WARNING: Importing a page will override the local page with the same ID (name). Any customisation made to the local page will be lost.

[[changing-user-role]]
==== Changing User Role

When no role is set from previous sessions the user is asked to choose a role when opening the Payara InSight application.

image::monitoring-console/mc_dialog_role-selection.png[Role Selection]

The selection can be changed at any time in the _General_ application settings for _Role_.

image::monitoring-console/mc_settings_app_general-h.png[Role Setting]

NOTE: Roles are not connected to accounts or other forms of permission management. Users can switch between the roles to suit their current intentions when using Payara InSight.

[[widgets]]
=== Widgets

Widgets are the components that can be placed on a page to show a particular metric or a set of metrics. While there are different types of widgets usually a widget shows a line graph of one or more metrics for the entire cluster.

[[adding-widgets]]
==== Adding a Widget

Widgets can be added to any page. Click the plus button in the minimized right side menu or the _Add New Chart_ button when it is expanded:

image::monitoring-console/mc_menu_right.png[Settings Menu Expanded]
image::monitoring-console/mc_menu_right-min.png[Settings Menu Collapsed]

This opens the _Add New Widget_ dialogue.

image::monitoring-console/mc_dialog_add-new-widget.png[Add New Widget Dialogue]

Use any one of combination of the filter dropdowns to select a subset of metrics and/or enter a query text in any of the free text search input fields to further narrow down the results. All matching metrics will be shown in the list on the left.

Select one or more items. Selected metrics are shown in the list on the right. The search can be changed between selections.

Finally, confirm the selection by clicking the _Add_ button of the dialogue.

Newly added widgets are automatically placed in a column so that widgets are evenly distributed on the page.

Use the xref:#configuring-widgets[side panel widget settings] to change the column, width, height or item position of the widget or use the quick menu for the widget by clicking the pencil symbol in the top right corner of the widget.

[[configuring-widgets]]
==== Configuring Widgets

To configure a widget select it by clicking on its title or the pencil icon in the top right corner of the widget.

This opens the right settings side panel and shows the detailed configuration of the widget. The side panel can be closed by either deselecting the widget, by clicking on its title again, or by clicking the collapse icon of the right sidebar.

NOTE: If the settings have been opened explicitly through the _Settings_ menu an empty selection will not close the settings side panel.

The _General_ widget settings are concerned with the widget's position within the page and its general appearance.

image::monitoring-console/mc_settings_widget_general-h.png[Widget General Settings]

.Widget General Settings
[cols="1,1,4",options="header"]
|====================
| Property | Default | Description
| Display Name | `(undefined)`
| Optional name to customise the displayed widget title. If no name is given the _Data => Series_ is shown.
| Column | 1  | The column in the layout the widget *prefers* to be in.
| Rank   | 1
| Within columns widgets are sorted by their item value, lowest values first. The item position is automatically updated during page layout should it be needed.
| Size   | 1 / 1
| How many width (number of columns) and height (number of rows) the widget should span. Note that this is a target size.

If the number of columns is reduced the width might be reduced to match the page layout.
|====================

The _Data_ settings are concerned with what and how the data is shown in the graph of a widget.

image::monitoring-console/mc_settings_widget_data-h.png[Widget Data Settings]

.Widget Data Settings
[cols="1,1,4a",options="header"]
|====================
| Property | Default | Description
| Type | `Time Curve`
|Changes the type of graph used to show the metric. This also affects which data of the metric a widget is focussed on. Possible choices:

* `Time Curve`: a line chart of current values (usually last 60 seconds),
* `Range Indicator`: show distributions of values (of last 60 seconds),
* `Alerts`: shows a table of alerts,
* `Annotations`: shows a table or list of annotations; these are key-value attributes associated with a metric series.
* `RAG Status`: Shows UP/DOWN status generally used in connection with health checks
* `Top N`: Shows just the numbers (legend), use with _Legend_ ordering by value for top highest or lowest table
| Mode | _(Default)_
| If available for the type of widget the display mode can be switched between _Table_ and _List_.

Table view is best fitted for annotations that share common attributes, lists are better fitted for annotations with potentially differing attributes.
| Series | - | The metric key as given when adding the metric, use pencil icon to edit
| Unit | `Count`
| The unit controls how the raw number of a metric is interpreted and represented e.g. when displaying in axis labels.

The unit also controls what values are accepted as input for numbers, like thresholds, that are on the same axis.

Possible units are: `Count`, `Milliseconds`, `Nanoseconds`, `Bytes`, `Percentage` and `Up/Down`.
| Unit 1/sec | `false` | Whether to show the metric as a change per second (delta between two points in the series normalised to average delta per second).
| Upscaling | `(undefined)` | When defined all values are multiplied by this factor. This can e.g. be used to move a decimal range between zero and one to a percentage range `0-100`.
| Upscaling _decimal value_ | `false`
| Check to mark the metric as one that is provided as a decimal value during collection (floats or doubles and alike).

This will then revert the conversion applied during collection which converts decimal values to an integer number with 4 available decimal digits by multiplying them by `10,000`.

This divides values by 10,000 again to move them back into their original value range.
| Line Style | `(none checked)` | Options on how to display the current value line in the graph: Check _Points_ to show individual data points on the line, check _Curvy_ to use Bézier curves instead of straight line connections.
| Background | _Fill_ | When _Fill_ is checked the area between line and axis is filled. The background transparency can be configured globally in the _Appearance_ application settings.
| X-Axis | _Labels_ | Whether to show labels for the x-axis.
| Y-Axis | `(undefined)` | Set a minimum or maximum number for the y-axis instead. When not set range is derived automatically from the data points.
| Legend | _Alphabetical_ | The order applied to the legend. Possible choices:
`None`: Items are shown as send by the server,
`Alphabetically`: Items are shown in alphabetical order (instance name first, series based label second),
`Increasing Value`: Items are shown ordered from smallest to largest current value,
`Decreasing Value`: Items are shown ordered from largest to smallest current value,
| Limit  | (undefined) | When set the maximum number of legend items shown (especially useful when ordering legend items)
| Limit Hide Constant Zero | `false` | When set series that have been zero for a while are not shown in legend and line graph
| Coloring | _Instance Name_
| Used to select the colours the data is shown with.

_Instance Name_ will show data in the same colour that belongs to the same instance.

_Series Name_ shows the metric series in the same colour (independent of instance). This is individual to each widget.

_Result Set Index_ will show each matching series in a different colour.

_Instance and Series Name_ shows the same instance and series in the same colour. This is global. This means another widget using this colouring with the same instance and series will have the same colour as well.
| Coloring Mapping | (undefined) | A space separated mapping of series group values to a named colour value as defined by the application appearance _Defaults_ settings. For example to color a series shown with label _AmberAck_ in amber color the entry is `AmberAck:amber` (`amber` here refers to the default name used for _Degraded_ (internal name)).
|====================

[[configuring-widget-extras]]
==== Configuring Widget Extras

The _Extras_ settings are concerned with additional information shown in or around the graph or widget content in general.

This includes visual helpers that can be added to a graph of a widget in order to make it easier to for the user to quickly understand the data displayed.

In particular these are reference lines and threshold indications.

image::monitoring-console/mc_settings_widget_extras-h.png[Widget Extras Settings]

.Widget Extras Settings
[cols="1,1,4a",options="header"]
|====================
| Property | Default | Description
| History | _None_
| What period of additional aggregated data to show in the graph:

* _None_ shows just the recent minute ("real-time")
* _1 Hour_ adds 1 point per minute in the recent hour (the most recent minute continues to show 1 point per second)
* _1 Day_ adds 1 point per hour in the recent day (the recent hour continues to show 1 point per minute, the recent minute 1 per second)
* _1 Month_ adds 1 point per day in the recent 31 days (again recent day continues 1 point per hour, recent hour per minute and recent minute per second).

NOTE: This data is only available after enabling the history aggregation using the asadmin command.
| Annotations | (checked) |  Whether to show annotations for in an alert table.
| Annotations (Fields) | _(blank)_ | A comma or space separated list of fields to show for an annotation list or table. The given field order is reflected in the view.
| Aggregates | (none checked) | Check to add the all time minimum, maximum or average line to the graph
| Waterline | (undefined) | Adds a simple reference line that could mark an upper or lower limit. Enter in unit of y-axis, e.g. 20ms, 5s, 2GB, 4%, 123
| Threshold Reference | `Off`
| Controls what value the _Alarming Threshold_ and _Critical Threshold_ are compared to.

Usually this is the most recent value but in some cases the all time minimum, maximum or average are useful too.
| Alarming Threshold | (undefined)
| The limit for the _"Alarming"_ state.

If _Critical Threshold_ is undefined or if its value is larger than this value the alarming threshold is exceeded if the reference value is larger than the threshold.

Otherwise, if the _Critical Threshold_ is lower than the _Alarming Threshold_, the threshold becomes 'inverse', and is exceeded when the reference value falls below the alarming value.

When exceeded the status becomes _"Alarming"_. Enter in unit of y-axis, e.g. `20ms, 5s, 2GB, 4%, 123`
| Critical Threshold | (undefined)
| The limit of the _"Critical"_ state.

If _Alarming Threshold_ is undefined or its value is smaller than this value the critical threshold is exceeded if the reference value is larger than the threshold.

Otherwise, if the _Critical Threshold_ is lower than the _Alarming Threshold_, the threshold becomes 'inverse', and is exceeded when the reference value falls below the critical value.

When exceeded the status becomes _"Critical"_, overrides status _"Alarming"_. Enter in unit of y-axis, e.g. `20ms, 5s, 2GB, 4%, 123`
|====================

Besides adding a reference line to the graph the critical and alarming thresholds affect the status evaluation.

Use the colour input to individually override the widget's colour for waterline, alarming line or critical line in graphs.

Press the button right next to it which shows the default colour as configured in the _Appearance_ application settings to reset the individual colour to use the default setting instead. A colour set to the default changes with the default.

[[configure-widget-status-messages]]
==== Configuring Widget Status Messages

The current value of a metric can automatically be categorised as a certain status.

For example based on the threshold values of decorations or by encountered errors or missing data. The _Status_ settings allows to set a custom message for a particular status.

image::monitoring-console/mc_settings_widget_status-h.png[Widget Status Settings]

[cols="1,1,4",options="header"]
|====================
| Property | Default | Description
| `No Data` | `(undefined)` | The message to show when no data for a metric is available. For example to hint about configurations needed to make the metric available.
| `Alarming` | `(undefined)` | The message to show when the threshold got exceeded and the status evaluates to _Alarming_.
| `Critical` | `(undefined)` | The message to show when the threshold got exceeded and the status evaluates to _Critical_.
|====================

The messages support simple markup using `pass:[*]boldpass:[*]` and `pass:[_]italicpass:[_]`.

[[configure-widget-alerts]]
==== Configuring Widget Alerts

The values of metric series can be tracked by the server to report values that out of a healthy range.

This is represented by states:

* _Red_: values in this range indicate an unhealthy state
* _Amber_: values in this range indicate a degraded state
* _Green_: values in this range indicate a healthy state
* _White_: values in this range are in no particular state (neither good nor bad, maybe undecidable)

State changes to amber or red are reported as alerts. This is shown in the widget they affect.

The settings allow filtering these related alerts to prevent them from showing. This makes sense on pages that have dedicated widgets to show alerts or just if users prefer to see the graph instead.

image::monitoring-console/mc_settings_widget_alerts-h.png[Widget Alerts Settings]

[cols="1,1,4",options="header"]
|====================
| Property | Default | Description
| Filter | (none checked) | Do not show (when checked) _Amber_ and/or _Red_ alerts, _Ongoing_ and/or _Stopped_ alerts, _Acknowledged_ and/or _Unacknowledged_ alerts.

If for any of these 3 groups of pairs both are checked no alerts would be shown. Widgets of type _Time Curve_ automatically exclude stopped and acknowledged alerts to avoid cluttering the graph with alerts that aren't relevant anymore.

Use a widget of type _Alerts Table_ to show all alerts according to the filter at all times.
|====================

[[handling-alerts]]
==== Handling Alerts

Alerts can occur when a watch is configured for a metric series.

A watch describes the conditions and thresholds used to determine a state from the recent values of a metric series. It is either _Red_ (unhealthy), _Amber_ (degraded), _Green_ (healthy) or _White_ (undetermined).

A _Red_ or _Amber_ state causes an alert that is shown on top of the graph.

image::monitoring-console/mc_sample_widget-alert.png[Example for an alert in line graph]

When an alert occurred for a metric shown in a graph the background of the line causing the alert is coloured in _Red_ or _Amber_ default colour until the alert is stopped.

Alerts are considered ongoing as long as the state is _Red_ or _Amber_. If it is evaluated to _Green_ or _White_ ("unspecified") the alert stops. Stopped or acknowledged alerts are no longer shown on top of line graphs.

Other ways to hide an alert from a line graph is to acknowledge the alert by checking its checkbox  or to configure the widget's _Alerts_ _Filter_ xref:#configure-widget-alerts[setting] so that alerts generally aren't shown for that widget.

To see stopped or acknowledged alerts add a widget of type _Alert Table_.

image::monitoring-console/mc_sample_widget-alert-table.png[Example of alert table showing a subset of alerts]

image::monitoring-console/mc_sample_page-alerts.png[Example of a "global" alert table shown all alerts (as used by the alert page)]

By default, an alert table shows all alerts including stopped and acknowledged alerts. Use the widget _Alerts_ xref:#alerts-settings[settings] to exclude alerts with certain properties.

An alert table shows the overall state of each instance in the table's legend.

As mentioned before the _Alerts_ settings can equally be used for line graphs to create a more restrictive setting.

[[remove-widgets]]
==== Removing a Widget

Any widget can be removed from any page. Click the pencil symbol in the top right of the widget or its title to open the widget's settings.

On the _General_ widget settings tab you find the _Remove_ button.

image::monitoring-console/mc_settings_widget_general-h.png[Remove Widget Button in General Widget Settings]

Confirm you want to remove the widget.

image::monitoring-console/mc_dialog_delete-widget.png[Remove Widget Confirmation Dialogue]

Remember that a page originating from a preset can be xref:#reset-pages[reset] to recover a widget that was removed accidentally.

[[common-page-settings]]
=== Common Page Settings

Most of the page settings have already been described in context of the different page related user actions. The following tables are included for reference.

The common page settings are those used by pages of _Type_ _Manual_ and _Query_.

image::monitoring-console/mc_settings_page_general-h.png[Common Page Settings]

.Common Page Settings
[cols="1,1,4a",options="header"]
|====================
| Property | Default | Description
| Name | - | The name as given by the user when the page was created or as defined in the page preset, only user-created pages can be renamed
| Type | `Manual` |
* `Manual`: user populates pages with widget using add widget
* `Query`: a query is used to populate page in intervals
| Number Of Columns | 1 | The number of columns available to place widgets in
| Include In Rotation | Yes
|
* Yes: Page is included in the set of pages rotated during page rotation
* No: page is excluded from this set
| Fill Empty Cells | No |
* Yes: empty cells in widget grid are filled by extending the span of the widget above
* No: empty cells left empty shown with a button to add a widget
| Server Sync | (checked) | `Auto`: Changes made by an administrator to the page or the widgets of this page are automatically pushed to the shared configuration if and only if the page has been explicitly pushed to the shared configuration at some point in the past.
|====================

NOTE: Pages of _Type: Query_ have more settings to configure the contents of the page.

image::monitoring-console/mc_settings_page_general-query-h.png[Query Page Settings]

.Query Page Settings
[cols="1,1,4",options="header"]
|====================
| Property | Default | Description
| Max Size | `32` | Maximum number of widgets added to the page when populating it from query matches (even if there are more metrics matching the query)
| Query Series | - | A series pattern used to query for metrics, matches are used to populate the page
| Query Interval | `1m` | The interval in which the query is run and the page is repopulated with matches
| Filter Type | - | When selecting a type only metrics inferred to prefer that type are shown on the page
|====================

See xref:#application-metrics-page[Application Metrics page] for an example of a query page.

[[global-configurations]]
=== Global Configurations

The configuration that controls global properties of the Payara InSight user interface. It is stored in the browser's local storage and thereby individual for each user.

NOTE: These settings cannot be shared.

[[general-application-settings]]
==== General Application Settings

image::monitoring-console/mc_settings_app_general-h.png[Application General Settings]

.Application General Settings
[cols="1,1,4",options="header"]
|====================
| Property | Default | Description
| Data Refresh | `2s` | Interval duration used to update the currently shown page with new data (poll duration). To pause data update toggle the _play/pause_ toggle switch.
| Page Rotation | `1m` | Duration each page is shown during a page rotation. To run or stop the rotation toggle the _on/off_ toggle switch. See section xref:#page-rotation[Page Rotation] for details.
| Role | _User_ | Select the used user role. See section xref:#changing-user-role[Changing User Role] for details.
| Watches | - | Click the _Go to Watch Settings_ button to open the xref:#watch-management[Watch Management]
|====================

[[pages-settings]]
==== Pages Settings

The _Pages_ application settings give access to different page management operations as described in detain in section xref:#page-management[Page Management]

image::monitoring-console/mc_settings_app_pages-h.png[Application Pages Settings]

[[alerts-settings]]
==== Alerts Settings

The _Alerts_ application settings contain general alert configuration that applies globally (to any page).

image::monitoring-console/mc_settings_app_alerts-h.png[Application Alerts Settings]

.Alerts Settings
[cols="1,1,4a",options="header"]
|====================
| Property | Default | Description
| Popups | _On_ | When _On_ any alert status change is shown in form of a pop-up dialogue regardless of the currently viewed page.

TIP: With this feature no alarms will be missed.
|====================

[[appearance-settings]]
==== Appearance Settings

Payara InSight allows you to configure the colours used in graphs. There is a global colour configuration affecting all graphs.

image::monitoring-console/mc_settings_app_appearance-h.png[Application Appearance Settings]

.Appearance Settings
[cols="1,1,4",options="header"]
|====================
| Property | Default | Description
| Scheme | (Payara Branding)
| The selected scheme is applied to set the colour palette for _Data_ as well as _Defaults_ and _Opacity_.

This is only a convenient way to switch all of these between different settings.

The individual properties can be changed afterward as usual without affecting the scheme.
| Data # (Palette) | (colours of _Payara Branding_ scheme)
| The list of colours to use when colouring data series in graphs.

This is the line colour in line charts or the bar colour in bar charts. Background will use the same colour with _Opacity_.

Add new colours by using the `+` button. The `-` button removes the last colour of the list.

If there are fewer colours in this palette than needed for different lines in a graph new colours are derived based on this palette.

The derived colours focus on bright colours with high contrast but might not always fit well with the rest of the palette.

In such case consider adding more colours to the palette.
| Defaults | (default of _Payara_ scheme)
| Sets the default colours for _Waterline_, _Alarming_ and _Critical_ as well as _Red_, _Amber_, _Green_ and _White_ state lines, backgrounds and texts.

Some of these can be individually overridden in the widget's configuration for these lines.
| Opacity | 10 | Background opacity for lines or bars in graphs, 0 (fully transparent) to 100 (solid).
| Thickness | (3) | Line width on a scale `1-8`.

Each point corresponds to 0.5px with. Default for lines in a line graph is 3, so 1.5px.
|====================

Themes act as a (p)reset of the data colour palette, default colours and _Opacity_ setting. When switching theme these settings are reset to the theme's value:

image::monitoring-console/mc_dialog_switch-theme.png[Switch Theme Dialogue]

Any further customisation of individual colours can and should be done after applying the theme of choice as switching theme would reset such customisations again.

[[alerts-management]]
=== Alerts Management

The values of series can be monitored using xref:#watch-management[watches]. If values fulfil all aspects of a start condition of a watch an alert is created.

While alerts transition between the states _Unhealthy_, _Degraded_, _Healthy_ and possibly _Normal_ based on the watch definition they originated from there are two manual status fields available for each alert:

**Global**:: _Acknowledged_/_Unacknowledged_: When an alert transitions to a more severe state it resets to _Unacknowledged_ waiting for users to manually acknowledge that they took notice (and care) of the degrading state transition.
**User**:: _Confirmed_/_Unconfirmed_: Alerts are unconfirmed for a user if that user has not seen and confirmed the alert transition yet.

Both of these manual states should help users to keep track of alert transitions and the alerts they have dealt with.

[[acknowledge-alerts]]
==== Acknowledge Alerts

Alerts are manually acknowledged by system operators when they have checked and reacted to the alert and consider it done. It is a form of alert management tool that is shared by all users.

To acknowledge alerts click the checkbox on left of an alert row.

image::monitoring-console/mc_dialog_alerts2.png[Alert Acknowledge Checkbox (left)]

An alert can be acknowledged:

* When shown as part of the _Alert Status Change_ pop-up dialogue
* When shown on top of a line graph widget
* When shown as part of an alert table widget

[[confirming-alerts]]
==== Confirming Alerts

When the state of alerts changed compared to the last state that has been confirmed by a user the change is indicated by the _Alert Status Change_ pop-up dialogue. It shows all transitions that took place since the user last confirmed alert status changes.

image::monitoring-console/mc_dialog_alerts.png[Confirm Alerts Dialogue]

When a user confirmed the change by either pressing _OK_ or _Show_ the shown transitions are considered as confirmed and are no longer shown.

NOTE: The confirmation status is individual for the user (browser local state) so each user has its own confirmed state and based on his/her last confirmation will get different updates.

The confirmation pop-ups can be disabled in the xref:#alerts-settings[Application Alerts Popups setting]. When disabled transitions are implicitly confirmed until the setting is enabled again. This is a more modest setting where alerts are only indicated globally by the alert indicator in the footer.

[[alerts-status-indicator]]
==== Alert Status Indicator

All alerts are indicated in the bottom right corner of the footer so that users do not miss alerts that would otherwise not show on the current page.

image::monitoring-console/mc_footer-alerts.png[Alerts Indicator]

The indicator gives a summary of the ongoing alerts:

* In Red: # of Unacknowledged _Unhealthy_ state alerts (# of acknowledged _Unhealthy_ state alerts)
* In Amber: # of Unacknowledged _Degraded_ state alerts (# of acknowledged _Degraded_ state alerts)

Click on the indicator to jump to the alerts overview page.

[[watch-management]]
=== Watch Management

A watch describes the conditions to meet to start and stop alerts in relation to a specific metric. For example to get an alert every time an HTTP request causes a server error (responds with any of the `5xx` status codes) a custom watch is installed.

This is very similar to a custom health check that could be linked to any metric available where the thresholds are defined as part of the watch. There are many varieties of conditions that can be formulated. Each watch has a start condition which when met starts a new alert.

Optionally a stop condition can be given which when met will stop the alert. If no such stop condition is given an alert stops as soon as its start condition is no longer met.

Such pairs of start and stop conditions can be defined for 3 levels:

Unhealthy:: corresponds to a "red" alert
Degraded:: corresponds to an "amber" alert
Healthy:: conditions for particularly good values, these will not cause alerts but can be used to mark a _healthy_ range in graphs.

Each watch must have at least an _Unhealthy_ or a _Degraded_ condition.
When both are given alerts can transition between _Degraded_ and _Unhealthy_ as the same issue or alert.

_Unhealthy_ takes precedence over _Degraded_ and _Healthy_, _Degraded_ takes precedence over _Healthy_ should their condition be met at the same time.

Should a _Degraded_ alert be acknowledged, but it transitions to _Unhealthy_ afterward the acknowledgement is reset so this change is not missed.

To open the watch management click the _Go to Watch Settings_ button in the _General_ application settings:

image::monitoring-console/mc_settings_app_general-h.png[Access Watch Settings]

NOTE: Generally the appearance of the watch management and the available options are dependent on the user role. Full access in given to _Administrators_. _Users_ are restricted to viewing and creating new user watches. _Guests_ can only view the settings.

image::monitoring-console/mc_dialog_manage-watches.png[Watch Management Dialogue]

The list shows _System Watches_ and _User Watches_ (below if any exists).
To expand and see a watches' conditions click on the down arrow or its name to toggle the details.

[[creating-watches]]
==== Creating a Watch

Open the watch management as described above and click the _Add New Watch_ button at the top.

image::monitoring-console/mc_dialog_add-new-watch.png[Add a New Watch Dialogue]

The above example shows a relatively simple watch first copied from an existing watch which then is customised. The name of the watch can be anything as long as it is unique.

Each watch should have either an _Unhealthy_ and/or a _Degraded_ level. It is also recommended to add a _Healthy_ level. Any value that is not matching any of the levels is _White_ (unspecified).

After giving your watch a unique name select the metric that should be watched. Only single metrics are supported.

Select the appropriate unit for the selected metric. Depending on the chosen unit thresholds can be given in values of this unit, e.g. when selecting _Milliseconds_ the threshold can be given as `1s` for 1 second.

NOTE: There is limited knowledge what the raw number of the metrics means as not all sources do include this information.

When the name, watched metric and unit attributes are set, check any of the states a condition should be formulated for and enter the comparison operator, the threshold and the scope.

The below table describes possible choices for each step of a watch condition.

.Watch Condition Segments
[cols="1,1,3",options="header"]
|====================
| Segment | Type | Description
| `is` _operator_ | Start | Select the comparison operator to use when comparing the actual value(s) to the threshold. The comparison is of form _actual operator threshold_.
| `is` _threshold_ | Start | The numeric threshold. The upper/lower limit. With the right unit selected the number can be given with a unit such as `5min` for time units, or `4KB` for bytes.
| `is` _scope_ | Start | Select a scope for the actual values that are compared to the threshold. The semantics of different scopes are described in a separate table below.
| `is` _scope-length_ | Start |
The length defines how many of the most recent data points of the watched metric are included in the scope of the comparison.

A number with time unit refers to the number of the points, a number with time unit to the duration of points to consider for the scope.
| `until` _operator_ | Stop | same as for `start`
| `until` _scope_ | Stop | same as for `start`
| `until` _scope-length_ | Stop | same as for `start`
|====================

The below table describes the semantics of the different types of comparison scopes.

.Watch Condition Scopes
[cols="1,3",options="header"]
|====================
| Scope | Description
| `for last`
| The comparison must be true for each point in the scope for the condition to be met. Similar to an _all_ logic.

The number of points included is specified afterward.

This is either a bare number referring number of points to include or a number with a time unit referring to a duration where all points within the duration from most recent point backwards are included in the scope.
| `for average of last` | The comparison must be true for the single average value of all points in the scope for the condition to be met.

The number of points included is specified afterward as number of duration from which to consider points.
| `in last`
| The comparison must be true for at least one of the points included in the scope for the condition to be met. Similar to an _any_ logic.

The number of points included is specified afterward as number of duration from which to consider points.
| `in sample`
| The comparison must be true for at least one of the points available for the condition to be met.

For this scope type no length is given as all available points are considered. This can vary but usually consists of the last minute of data.
|====================

After composing the watch conditions press _Save_ to install the watch.

WARNING: If a watch of the same name already exists the existing watch is replaced.

System watches that originate from server modules cannot be changed.
But they can be disabled and copied to effectively make them editable.
Find more in the edit section below.

WARNING: Watches operate on the DAS server. Their configuration is common for all users. Any change will affect other users.

[[editing-watches]]
==== Editing a Watch

To edit a user watch open the xref:#watch-management[watch manager], scroll down to the list of _User Watches_ and click the _Edit_ button of the watch that should be edited.

image::monitoring-console/mc_dialog_edit-watch.png[Edit a User Watch Dialogue]

Confirm changes by clicking _Update_.

When changing the name of the watch a new watch is created with the new name and the old watch continues to exist. It can be deleted afterward using the _Delete_ button in the _User Watches_ list.

WARNING: When changing the name of a watch to a name of an already existing watch this overrides that watch. In other words watches are always identified by their name.

NOTE: System watches cannot be edited. To achieve the effect of a changed system watch disable and copy it. The copy is a user watch that can be adjusted freely. The suggested name _Copy of {original name}_ can be changed as long as it is unique.

[[enabling-or-disabling-watches]]
==== Enabling or Disabling a Watch

Open the xref:#watch-management[watch manager] as an _Administrator_ and click the _Disable_ or _Enable_ button of the watch that should be disabled or enabled.

The change has immediate effect and can easily be "undone" by toggling the state again. If there were any ongoing alerts due to a watch that gets disabled, these alerts stops.

Enabling such a watch again then requires matching the watches start condition again.

[[presets-pages]]
=== Preconfigured Pages

Payara InSight is shipped with a dozen of preconfigured pages. These are in no way privileged over the user-created pages. It is simply a configuration identical to one user can create manually that is hard coded as a preset.

Users can modify these pages freely, but they cannot be deleted.

[[core-page]]
==== Core Page

The _Core_ page gives an overview of some of the important instance metrics. Each instance in the grid is shown separately.

image::monitoring-console/mc_page_core.png[Core Page]

* _Active Sessions_: Total number of active session for the instance.
* _Thread Count_: Total number of threads used by the instance.
* _Request Count_: Number of HTTP request per second processed by the instance.
* _Heap Usage_: Percentage of the current instance maximum heap memory already used.
* _CPU Usage_: Percentage CPU usage by the instance (not the machine but the process).
* _Thread Pool Current Thread Usage_: Percentage of HTTP thread pool threads currently in use by the instance.

[[traffic-light-status-page]]
==== Traffic Light Status Page

The _Traffic Light Status_ page (a.k.a. RAG Status for Red-Amber-Green Status) indicates the health status of the server and deployed application using traffic light signals to visualise the current state.

image::monitoring-console/mc_page_rag.png[Traffic Light Status Page]

The content of the page is based on Payara Health Checks (needs to be enabled in the server configuration) and MicroProfile Heath checks of deployed applications.

In contrast to most pages this page is not static based on a manually created configuration. Instead, the page is populated with widgets based on a query.

For more details on query pages see sections xref:#adding-pages[Adding Pages] and xref:#common-page-settings[Page Settings].

[[http-page]]
==== HTTP Page

The _HTTP_ page gives a rough overview of the state of the HTTP services of each instance.

image::monitoring-console/mc_page_http.png[HTTP Page]

* _Connection Queue Count Open Connections_: Total number of open connection in the connection queue
* _Thread Pool Current Threads Busy_: Number of threads in the HTTP thread pool currently processing an HTTP request.
* _Server Count2xx_: Requests per seconds and instance responding with Success.
* _Server Count3xx_: Requests per seconds and instance responding with Redirection.
* _Server Count4xx_: Requests per seconds and instance responding with Client Error.
* _Server Count5xx_: Requests per seconds and instance responding with Server Error.

[[jvm-page]]
==== JVM Page

The _JVM_ pages gives a general overview of the state of the JVM running Payara Server.

image::monitoring-console/mc_page_jvm.png[JVM Page]

* _Used Heap_: Total size of the used heap memory
* _Heap Size_: Size of the committed (reserved) heap memory (OS level)
* _Loaded Classes_: Total number of loaded classes
* _Unloaded Classes_: Total number of unloaded classes
* _Live Threads_: Total number of threads used by the JVM (including daemon threads)
* _Daemon Threads_: Total number of daemon threads used by the JVM

[[monitoring-page]]
==== Monitoring Page

This is mostly useful to identify problems with the monitoring system or to cross-check that unexpected metric values aren't caused by general problems with monitoring.

image::monitoring-console/mc_page_monitoring.png[Monitoring Page]

* _Source Times_: Shows the duration it took to collect metric data from the individual sources within the server. Durations should be well below a second. Usually in two digit millisecond range.
* _Sources_: Number of sources metrics are collected from in a particular second. This varies as some sources are collected in an interval of several seconds.
* _Sources with Errors_: Shows how many of the sources that were collected caused an error during collection that potentially ends the collection of that source so that some metrics usually provided by that source might no longer be collected. This can explain "missing" metrics.
* _Metrics Time_: The total time it took to collect all sources. As collection happens once every second this should be well below 1 second.
+
This metric is watched and alerts are created should the time exceed 600ms for multiple times in a row.
+
This time can vary a lot depending on the server configurations as sources are enabled and disabled. It can also be influenced strongly by the deployed applications as they can contribute metrics in large numbers.
* _Watches Time_: The total time it took to collect and evaluate all watches. This time is less critical, but it should usually be well below 1 second.
+
Typically, in the range of two digit milliseconds.
* _Alerts_: The total number of ongoing (active) alerts.

[[health-checks-page]]
==== Health Checks Page

A page that gives an overview of the state of the server health checks. The individual checks need to be enabled in the server's _HealthCheck_ configuration.

NOTE: It is not required to enable the _HealthCheck service_ in the _General_ tab in case the checks should only be enabled for metrics based monitoring without causing health check notifier messages.

image::monitoring-console/mc_page_health-checks.png[Health Checks Page]

* _CPU_: CPU Health Check, average percentage of CPU used by the server instance during last 4 seconds
* _GC_: Garbage Collection Health Check, percentage of time used to collect garbage objects during the last 4 seconds
* _Memory_: Machine Memory Usage Health Check, percentage of the total available physical memory used
* _Heap_: Heap Memory Usage Health Check, percent of total available heap memory used by the JVM
* _MP Health_: MicroProfile Health Check, percent of instances that respond with `UP` status to a liveliness health endpoint request (this includes the DAS that is the only instance that is performing this check every 12 seconds)
* _Connection Pool_: Connection Pool Health Check, percent of connections currently used for each JDBC connection pool
* _Alerts_: A list of all health check related alerts

[[thread-health-page]]
==== Thread Health Page

The _Threads_ page gives detailed information on thread health of the cluster and lists information on stuck or hogging threads. The total number of live and daemon threads are given for reference.

image::monitoring-console/mc_page_threads.png[Thread Health Page]

* _Stuck Thread Incidents_: Table listing the most recent information for threads that are considered stuck.
+
This is the case if the time passed since a thread started a not yet finished unit of work becomes longer than the set threshold in the _Stuck Threads_ health check configuration.
+
This could be because it is waiting at a lock or the operation takes a considerable amount of time.
* _Hogging Thread Incidents_: Table listing the most recent information for threads that are considered hogging.
+
This is the case if the thread's use of the CPU in percent points is higher than the threshold value configured in the _Hogging Threads_ health check configuration for `n` times in a row, where `n is 1 + the configured number of retries`.
* _Live Threads_: Total number of threads used by the JVM (including daemon threads)
* _Daemon Threads_: Total number of daemon threads used by the JVM

WARNING: Be aware that the number shown in the example image might not be characteristic. For demonstration purposes the thresholds might be set uncharacteristically low to be able to "force" entries. +
Usually the threshold for stuck threads should be in region of some seconds to a few minutes. The threshold for hogging threads should be well above 90% with a few retries.

[[request-tracing-page]]
==== Request Tracing Page

The _Request Tracing_ page overview page shows traces that exceeded the set threshold configures as part of the request tracing server configuration.

NOTE: If this page does not show any data, no request has exceeded the threshold or the request tracing has not been enabled. Check server config _Configuration_ => _Request Tracing_.

The _Trace Duration Range_ widget shows all traces for the same method as a single bar. The length and position of the bar gives the range of total trace duration for all the occurrences that exceeded the threshold.

The bar starts at the minimum duration observed and ends at the maximum duration observed in the last minute. The legend shows the average duration and the method traced (innermost trace span operation)

image::monitoring-console/mc_page_request-tracing.png[Request Tracing Page]

When checking the minimum and/or maximum checkbox in the widgets _Extras_ settings the bar starts and/or ends at these "all time" values instead of the minimum and/or maximum within the last minute.

The _Trace Duration Above Threshold_ widget shows a graph where each point marks the duration of a "slow" request at the moment the requests occurred. Possible alerts are shown on top of the graph.

By clicking on one of the bars in the overview's _Trace Duration Range_ widget the details of all kept traces for this method can be viewed.

image::monitoring-console/mc_dialog_request-tracing.png[Request Tracing Details Dialogue]

This data corresponds to the traces stored in the trace-store.
For each trace, each of the spans corresponds to a bar in this graph.

The details can be sorted by wall-time or by total duration. By default, the traces are sorted longest (slowest) to shortest (fastest) total duration.

On the time axis the spans are shown relative to the start of the trace.

The legend gives average durations for each of the spans occurring for the traced method.

NOTE: The detail view shows a snapshot of the data found in the trace store. Changing the sorting will reload data and reflect an updated snapshot.

When clicking on the bars in the details view the right side panel shows the trace span details of the clicked trace span.

WARNING: Be aware that the graphs in the example images above show unrealistically low numbers due to the way that request tracing was configured. In a more realistic configuration, the durations are more likely to be in range of a few hundred milliseconds to some seconds.

[[sql-page]]
==== SQL Page

The _SQL_ page gives insight into slow SQL queries for all connection pools configured in Payara Server.

NOTE: To capture slow SQL queries the _JDBC Connection Pool_ configuration's _Slow Query Log Threshold_ in the _Advanced_ tab needs to be set to a positive number.

image::monitoring-console/mc_page_sql.png[Slow SQL Page]

* _Slow SQL Queries_: Shows SQL details for queries that were too slow. _Value_ refers to the duration of the SQL query.
* _Worst SQL Execution Time_: Shows SQL query activity. Each data point gives the duration of the slowest query run during last second. Zero means no SQL query was run.
* _Slow SQL Alerts_: A list of alerts caused by too slow SQL queries in reference to the _Slow Query Log Threshold_ given in the pool configuration. Single outliers cause a degraded state (amber alerts), outlier groups cause unhealthy state (red alerts).

[[alerts-page]]
==== Alerts Page

The main use of the _Alerts_ page is to check for any server alerts. The page is split into two lists: the upper list containing all ongoing alerts, and the lower list containing past alerts.

As always for alert lists both lists are sorted starting with the most recent severe alert progressing to the oldest least severe alert. Annotations associated with alerts are hidden in this view to make room for more alert entries.

image::monitoring-console/mc_page_alerts.png[Alerts Page]

NOTE: Past alerts can be managed by acknowledging the alerts which makes them disappear from the list.

[[application-metrics-page]]
==== Application Metrics Page

Payara InSight is build with the intention to make visualising user defined metrics really easy. This includes MicroProfile Metrics and MicroProfile Health checks that as defined by deployed application and server itself.

It does not require and further configuration to make them available as metrics within Payara InSight.

In addition, the metrics selection wizard has additional filters specifically filtering on the properties of MicroProfile Metrics.

image::monitoring-console/mc_dialog_add-new-widget.png[Select MicroProfile Metrics]

When MicroProfile Metrics get translated to InSight series the MP tags become the `@` group of the shown series key, the MP _metric_ stays the metric name.

The _Application Metrics_ page is a page that is automatically populated will MicroProfile Metrics based on a query. This means the metrics shown on the page vary depending on what metrics are defined in applications and the server as MicroProfile metrics.

image::monitoring-console/mc_page_app-metrics.png[Application Metrics Page]

When populating the page the widgets are configured automatically based on the information available in MicroProfile.

For more details on query pages see xref:#adding-pages[Adding Pages] and xref:#common-page-settings[Page Settings].

[[experimental-features]]
=== Experimental Features

This section includes features that aren't fully complete or integrated or which might change drastically or even be removed in future releases.

[[pattern-data-series]]
==== Pattern Data Series

The term _series_ is used for the name or key for a particular metric. Each metric has a unique key or series name.

Usually these names use _tags_ for form _key:value_ to categorise metrics into groups. For example:

----
ns:jvm MetricName
ns:jvm @:groupName MetricName
----

The series names shown above exemplify conventions used throughout Payara InSight. The first grouping level usually is the `ns` (short for namespace), the second the `@` (short for _group_).

In the example the metrics belong to the `jvm` namespace and the `groupName` group within that namespace.

When metrics are selected using the wizard only fully qualified metric series can be selected. This is a limitation of the selection wizard. On the technical level a series can be either a fully qualified series name or a series pattern.

Patterns contain wild-cards to match not only one specific metric but a set of metrics. Wild-cards can occur in different places. Examples of this can be found in the query page's _Query Series_ setting.

For example the _Traffic Light Status_ page uses the query `pass:[*]boldpass:[ns:health ?:* *]`.

A `pass:[*]boldpass:[*]` wild-card for the metric name means _any metric name_.

The `pass:[*]boldpass:[?:*]` combines a wild-card (tag) value (`pass:[*]boldpass:[*]`) with a wild-card tag name (`?`). This means _any tag name_ (including none and multiple of them) with _any value_.

So the full `pass:[*]boldpass:[ns:health ?:* *]` matches any series that is in `ns:health`, weather or not is has more tags, while `pass:[*]boldpass:[ns:health *]` only would match series in `ns:health` which do not have further tags.

NOTE: This feature can be used to automatically show all metrics of a certain pattern in a single widget as it is done by the request tracing page.
